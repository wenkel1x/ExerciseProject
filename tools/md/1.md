### Linux 远程切换为windows方法
```sh
vim /etc/default/grub
GRUB_DEFAULT=saved

apt-get update grub
reboot_to_windows ()
{
  windows_title=$(grep -i windows /boot/grub/grub.cfg |cut -d "'" -f 2)
  sudo grub-reboot "$windows_title" && sudo reboot
}
reboot_to_windows
```
### Linux LG VG PV创建与扩展

```sh
#创建PV
pvcreate /dev/sde1 /dev/sdf1
#创建VG
vgcreate vg_name1 /dev/sde1 /dev/sdf1
#创建LV
lvcreate -l 100%VG -n lv_name1 vg_name1
#LV扩充新盘
pvcreate /dev/nvme1n1p1
vgdisplay
vgextend lv_name1 /dev/nvme0n1p1
lvdisplay
#刷新扩充空间
lvextend -l +100%FREE /dev/vg_name1/lv_name1
resize2fs /dev/vg_name1/lv_name1
```
### Linux新增磁盘无法自动挂载
- 执行`blkid`命令，列出当前系统中所有已挂载文件系统的类型以及对应设备的UUID。
- 将`/etc/fstab`中挂载的硬盘编号更改为UUID

### Linux关闭休眠
```shell
systemctl status sleep.target
sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleeptarget
```

### Linux设置开机频率
```shell
fmax=5400000;pushd .; for i in $(seq 0 15); do cd /sys/devices/system/cpucpu$i/cpufreq; sudo bash -c "echo ${fmax} > scaling_max_freq"; sudo bash -c"echo performance > scaling_governor";  done; popd
```
### Linux开机自动设置为performance mode
1. 安装sysfsutils
```shell 
sudo apt-get install sysfsutils
```
2. 查看当前调节器
```shell 
cat /sys/devices/system/cpu/cpu0/ cpufreq/scaling_governor 
```
3. 关闭ondemand服务
```shell 
systemctl stop ondemand
systemctl disable ondemand
```
4. 然后更改sysfutils启动文件/etc/sysfs.conf
```shell
vim /etc/sysfs.conf #有多少   CPU，就添加对应数量的代码，并更改为对应的CPU编号
devices/system/cpu/cpu*/cpufreq/   scaling_governor = performance
```
### Linux tigerVNC安装

- [How-to-install-and-configure-vnc-on-ubuntu-18-04]

### ARM platform Orange-Pi5开发板烧录Ubuntu

全志开发板提供的USB转TTL模块官方提供的CH340串口线线序分别：黑色-GND 绿色-RX 白色-TX 红色为电源,烧录过程如下:
1. Boot from an SD Card.
2. Download the latest Orange-Pi5-Plus image from GitHub [Orange-Pi5-image].
3. Check if your eMMC is detected.
```shell
ubuntu@ubuntu-desktop:~$ lsblk /dev/mmcblk0
NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
mmcblk0     179:0    0  58.2G  0 disk 
```
4. Write the downloaded Orange-Pi-5B image to your eMMC.
```shell
xz -dc ubuntu-22.04.2-preinstalled-desktop-arm64-orangepi-5b.img.xz | sudo dd of=/dev/mmcblk0 bs=4k
sync
```

### ansible自动化运维简单使用方法

1. ansible安装
```shell
#ubuntu 安装
sudo apt update
sudo apt install ansible -y
# CentOS/RHEL安装
sudo yum install epel-release -y
sudo yum install ansible -y

#使用所以平台
sudo yum install epel-release -y
sudo yum install ansible -y
```
2. 简单使用
```shell
vim /etc/ansible/hosts
[webservers]
192.168.1.10
192.168.1.11
[dbservers]
db1.example.com
#测试连接
ansible all -m ping -i hosts
#执行命令
ansible webservers -m shell -a "uptime" -i hosts
#远程关机操作
#config
#`ip addr`  ansible_ssh_port=22 ansible_ssh_user=`user`  ansible_ssh_pass=`password` ansible_sudo_pass='password'
ansible -i /etc/ansible/hosts webservers -m command -a "sudo shutdown now" -b
```
3. 编写Playbook示例
```shell
# install_nginx.yml
- name: 安装 Nginx
  hosts: webservers
  become: yes
  tasks:
     - name: 安装 nginx
      apt:
         name: nginx
         state: present
#运行 Playbook：
ansible-playbook -i hosts install_nginx.yml
```
4. 常用模块

|模块名	|功能说明 |
| :----- | :----- |
|ping	|测试连接 |
|shell|	执行Shell命令|
|copy	|复制文件|
|apt /yum	| 安装软件包|
|service	|管理服务|
|user	|管理用户|
|file	|设置文件权限、目录等|

### Linux tigervnc start fail
```sh
sudo systemctl status vncserver@1.service
● vncserver@1.service - Start TightVNC server at startup
   Loaded: loaded (/etc/systemd/system/vncserver@.service; indirect; vendor preset: enabled)
   Active: failed (Result: exit-code) since Fri 2022-03-11 13:44:05 CST; 23s ago
  Process: 9283 ExecStart=/usr/bin/vncserver -depth 24 -geometry 1280x800 :1 (code=exited, status=29)
  Process: 9279 ExecStartPre=/usr/bin/vncserver -kill :1 > /dev/null 2>&1 (code=exited, status=2)
 Main PID: 2750 (code=dumped, signal=SEGV)
```
vnctiger 异常死机,导致临时进程文件未被清理. `/tmp/.X1-lock /tmp/.X11-unix/X1` >> 删除这两个临时文件,即可重启vncserver






<!-- 链接定义区域 -->
[How-to-install-and-configure-vnc-on-ubuntu-18-04]: https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-18-04
[Orange-Pi5-image]: https://github.com/Joshua-Riek/ubuntu-rockchip/wiki/#install-ubuntu-onto-your-emmc-from-linux
<br><br><br>[回到顶部](#)